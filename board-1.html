{{#boardState}}
<div class="display-table tak-board-1 width-height-100 size-{{size}}">
	{{#y:y}}
	<div class="display-table-row tak-row {{y % 2 ? 'even' : 'odd'}}">
		{{# .:x}}
		<div class="display-table-cell
		tak-square
		{{topIsStanding ? 'standing' : ''}}
		{{x % 2 ? 'even' : 'odd'}}
		owned-by-{{squareOwner(pieces)}}
		x-{{x}}
		y-{{y}}
		{{highlight[x + '-' + y] ? 'highlight' : ''}}
		{{canClick[x + '-' + y] ? 'can-click' : ''}}"
		style="position: relative;"
		on-click="fire(canClick[x + '-' + y] ? 'click' : null, { x: x, y: y })"
		on-mouseover="fire('hover', { x: x, y: y })">
			{{#topIsStanding}}
				<div class="piece-topper-border square-border"></div>
				<div class="piece-topper square owned-by-{{squareOwner(pieces)}}"><div class="transparent width-height-100"></div></div>
			{{/}}
			{{#pieces.length > 0 && squareOwner(pieces).toUpperCase() === pieces[pieces.length - 1]}}
				<div class="piece-topper-border circle-border"></div>
				<div class="piece-topper circle owned-by-{{squareOwner(pieces)}}"><div class="transparent width-height-100"></div></div>
			{{/}}

			<div class="width-height-100 piece-holder row-count-{{pieces.length}} {{atLeastClasses(pieces)}}">
				{{#pieces.slice():stackPosition}}
				{{# {piece:.} }}
				<div class="tak-piece owned-by-{{piece.toLowerCase()}}">
				</div>
				{{/}}
				{{/}}
			</div>
		</div>
		{{/}}
	</div>
	{{/}}
</div>
{{/}}
