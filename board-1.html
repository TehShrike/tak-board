{{#boardState}}
<div class="display-table tak-board width-height-100 size-{{size}}">
	{{#y:i}}
	<div class="display-table-row tak-row {{i % 2 ? 'even' : 'odd'}}">
		{{# .:j}}
		<div class="display-table-cell tak-square {{topIsStanding ? 'standing' : ''}} {{j % 2 ? 'even' : 'odd'}} owned-by-{{squareOwner(pieces)}}" style="position: relative;">
			{{#topIsStanding}}
				<div class="piece-topper-border square-border"></div>
				<div class="piece-topper square owned-by-{{squareOwner(pieces)}}"></div>
			{{/}}
			{{#pieces.length > 0 && squareOwner(pieces).toUpperCase() === pieces[pieces.length - 1]}}
				<div class="piece-topper-border circle-border"></div>
				<div class="piece-topper circle owned-by-{{squareOwner(pieces)}}"></div>
			{{/}}

			<div class="width-height-100 display-table row-count-{{pieces.length}} {{atLeastClasses(pieces)}}">
				<div class="square-spacer">&nbsp;</div>
				{{#pieces.slice().reverse():stackPosition}}
				{{# {piece:.} }}
				<div class="tak-piece owned-by-{{piece.toLowerCase()}}">
					&nbsp;
				</div>
				{{/}}
				{{/}}
			</div>
		</div>
		{{/}}
	</div>
	{{/}}
</div>
{{/}}
